attributes = [
    {"attribute": "Discovery", "explanation": "Finding new things"},
    {"attribute": "Accuracy", "explanation": "Correctly conveying one's opinions or beliefs"},
    {"attribute": "Achievement", "explanation": "Accomplishing something important"},
    {"attribute": "Adventure", "explanation": "Having new and exciting experiences"},
    {"attribute": "Charm", "explanation": "Maintaining physical attractiveness"},
    {"attribute": "Power", "explanation": "Leading others with authority"},
    {"attribute": "Influence", "explanation": "Controlling others"},
    {"attribute": "Autonomy", "explanation": "Deciding everything in one's life by oneself"},
    {"attribute": "Beauty", "explanation": "Appreciating beautiful things around oneself"},
    {"attribute": "Victory", "explanation": "Defeating oneself or others"},
    {"attribute": "Challenge", "explanation": "Tackling difficult tasks or problems"},
    {"attribute": "Change", "explanation": "Living a life full of variety and changes"},
    {"attribute": "Comfort", "explanation": "Living a stress-free and comfortable life"},
    {"attribute": "Commitment", "explanation": "Keeping unbreakable promises"},
    {"attribute": "Compassion", "explanation": "Helping others with a caring heart"},
    {"attribute": "Resistance", "explanation": "Rebelling against societal pressure"},
    {"attribute": "Helpfulness", "explanation": "Being helpful to people around"},
    {"attribute": "Courtesy", "explanation": "Being polite and respectful to others"},
    {"attribute": "Creation", "explanation": "Creating new and innovative ideas"},
    {"attribute": "Trust", "explanation": "Being trustworthy and reliable"},
    {"attribute": "Responsibility", "explanation": "Fulfilling obligations towards others"},
    {"attribute": "Harmony", "explanation": "Living in harmony with the environment"},
    {"attribute": "Excitement", "explanation": "Leading a thrilling and stimulating life"},
    {"attribute": "Honesty", "explanation": "Living honestly without lying to anyone"},
    {"attribute": "Fame", "explanation": "Being recognized and acknowledged"},
    {"attribute": "Family", "explanation": "Creating a happy and loving family"},
    {"attribute": "Fitness", "explanation": "Maintaining a strong and healthy body"},
    {"attribute": "Flexibility", "explanation": "Easily adapting to new environments"},
    {"attribute": "Forgiveness", "explanation": "Living by forgiving others"},
    {"attribute": "Friendship", "explanation": "Making close and supportive friends"},
    {"attribute": "Fun", "explanation": "Enjoying life through play"},
    {"attribute": "Generosity", "explanation": "Sharing one's possessions with others"},
    {"attribute": "Belief", "explanation": "Acting according to what one believes is right"},
    {"attribute": "Religion", "explanation": "Respecting the will of a higher power"},
    {"attribute": "Growth", "explanation": "Maintaining positive change and growth"},
    {"attribute": "Health", "explanation": "Living healthily and feeling well"},
    {"attribute": "Cooperation", "explanation": "Working with others to achieve something"},
    {"attribute": "Honesty", "explanation": "Living without lying and being truthful"},
    {"attribute": "Hope", "explanation": "Living with hope for the future"},
    {"attribute": "Humility", "explanation": "Living with a humble attitude"},
    {"attribute": "Humor", "explanation": "Seeing the humorous side of life and the world"},
    {"attribute": "Independence", "explanation": "Living without relying on others"},
    {"attribute": "Diligence", "explanation": "Working hard on one's tasks"},
    {"attribute": "Peace", "explanation": "Maintaining inner peace"},
    {"attribute": "Intimacy", "explanation": "Building close relationships with a few people"},
    {"attribute": "Fairness", "explanation": "Treating everyone equally"},
    {"attribute": "Knowledge", "explanation": "Learning or creating valuable knowledge"},
    {"attribute": "Leisure", "explanation": "Enjoying one's time relaxing"},
    {"attribute": "Being loved", "explanation": "Being loved by close people"},
    {"attribute": "Love", "explanation": "Giving love to someone"},
    {"attribute": "Mastery", "explanation": "Becoming proficient in usual work or tasks"},
    {"attribute": "Present", "explanation": "Living focused on the present moment"},
    {"attribute": "Moderation", "explanation": "Seeking the right amount and avoiding excess"},
    {"attribute": "Devotion", "explanation": "Finding the only partner one can love"},
    {"attribute": "Rebellion", "explanation": "Resisting authority or rules"},
    {"attribute": "Helpfulness", "explanation": "Taking good care of others"},
    {"attribute": "Openness", "explanation": "Being open to new experiences, ideas, and choices"},
    {"attribute": "Order", "explanation": "Living an organized and orderly life"},
    {"attribute": "Passion", "explanation": "Having enthusiastic feelings for activities"},
    {"attribute": "Joy", "explanation": "Feeling good"},
    {"attribute": "Popularity", "explanation": "Being liked by many people"},
    {"attribute": "Purpose", "explanation": "Defining the meaning and direction of life"},
    {"attribute": "Rationality", "explanation": "Living by reason and logic"},
    {"attribute": "Reality", "explanation": "Acting realistically and practically"},
    {"attribute": "Responsibility", "explanation": "Fulfilling one's duties"},
    {"attribute": "Risk", "explanation": "Taking risks to gain challenges"},
    {"attribute": "Romance", "explanation": "Having an exciting and passionate love"},
    {"attribute": "Security", "explanation": "Gaining a sense of security"},
    {"attribute": "Acceptance", "explanation": "Accepting oneself and others as they are"},
    {"attribute": "Self-control", "explanation": "Controlling one's own actions"},
    {"attribute": "Autonomy", "explanation": "Living by one's own power"},
    {"attribute": "Self-awareness", "explanation": "Having a deep understanding of oneself"},
    {"attribute": "Devotion", "explanation": "Serving someone and living for them"},
    {"attribute": "Sexuality", "explanation": "Leading an active and satisfying sex life"},
    {"attribute": "Minimalism", "explanation": "Living a minimalist life with only the essentials"},
    {"attribute": "Solitude", "explanation": "Having time and space to be alone from others"},
    {"attribute": "Spirituality", "explanation": "Growing and maturing spiritually"},
    {"attribute": "Stability", "explanation": "Leading a consistently calm life"},
    {"attribute": "Tolerance", "explanation": "Respecting and accepting different existences"},
    {"attribute": "Tradition", "explanation": "Respecting patterns passed down from the past"},
    {"attribute": "Virtue", "explanation": "Living morally right"},
    {"attribute": "Wealth", "explanation": "Becoming rich"},
    {"attribute": "Peace", "explanation": "Acting for world peace"},
    {"attribute": "Fulfillment", "explanation": "Fully utilizing one's abilities"},
    {"attribute": "Truth", "explanation": "Seeking truth, philosophy, and wisdom"},
    {"attribute": "Dignity", "explanation": "Being a dignified existence"},
    {"attribute": "Authenticity", "explanation": "Being oneself without pretense"},
    {"attribute": "Immersion", "explanation": "Deeply focusing on what is in front of oneself"},
    {"attribute": "Effort", "explanation": "Working hard for a purpose"},
    {"attribute": "Conviction", "explanation": "Making decisions after thorough consideration"},
    {"attribute": "Freedom", "explanation": "Living without being bound by anything"},
    {"attribute": "Expression", "explanation": "Expressing oneself to the world"},
    {"attribute": "Oneness", "explanation": "Feeling connected as an important part of the world"},
    {"attribute": "Ingenuity", "explanation": "Always looking for better ways"},
    {"attribute": "Professionalism", "explanation": "Committing to tasks without deviating"},
    {"attribute": "Flexibility", "explanation": "Approaching things without being rigid"},
    {"attribute": "Leisure", "explanation": "Having time and mind to spare"},
    {"attribute": "Overcoming", "explanation": "Overcoming difficulties and growing"},
    {"attribute": "Fellowship", "explanation": "Cooperating with companions towards a goal"},
    {"attribute": "Simplicity", "explanation": "Leading a simple and uncluttered life"}
]

adviser_prompts = """
Analyze the following individual's priorities and values based on their actions and context. Below is a list of attributes. Based on the information provided, determine which attributes align with the individual's authentic values. The text should be structured with a paragraph summarizing the result of the analysis, followed by an ordered list explaining how each attribute applies to them. After the explanation, include a tag (high, medium, or low) with a percentage indicating the relevance of the attribute to the individual. form ist the following, {tag: percentage}. The label decides how the value is relevant to the sentence which you analyze. The form of the list following: {number}. attribute - explanation - label. Please saparate by hyphen. Do not add conclusion sentences.

Here are the attributes to consider: Discovery, Accuracy, Achievement, Adventure, Charm, Power, Influence, Autonomy, Beauty, Victory, Challenge, Change, Comfort, Commitment, Compassion, Resistance, Helpfulness, Courtesy, Creation, Trust, Responsibility, Harmony, Excitement, Honesty, Fame, Family, Fitness, Flexibility, Forgiveness, Friendship, Fun, Generosity, Belief, Religion, Growth, Health, Cooperation, Honesty, Hope, Humility, Humor, Independence, Diligence, Peace, Intimacy, Fairness, Knowledge, Leisure, Being loved, Love, Mastery, Present, Moderation, Devotion, Rebellion, Helpfulness, Openness, Order, Passion, Joy, Popularity, Purpose, Rationality, Reality, Responsibility, Risk, Romance, Security, Acceptance, Self-control, Autonomy, Self-awareness, Devotion, Sexuality, Minimalism, Solitude, Spirituality, Stability, Tolerance, Tradition, Virtue, Wealth, Peace, Fulfillment, Truth, Dignity, Authenticity, Immersion, Effort, Conviction, Freedom, Expression, Oneness, Ingenuity, Professionalism, Flexibility, Leisure, Overcoming, Fellowship, Simplicity, etc."
"""

analyze_prompts = """
Retrieve only following attributes out of the input text

The below is the list of the attributes that you need to extract from the input text:

Discovery, Accuracy, Achievement, Adventure, Charm, Power, Influence, Autonomy, Beauty, Victory, Challenge, Change, Comfort, Commitment, Compassion, Resistance, Helpfulness, Courtesy, Creation, Trust, Responsibility, Harmony, Excitement, Honesty, Fame, Family, Fitness, Flexibility, Forgiveness, Friendship, Fun, Generosity, Belief, Religion, Growth, Health, Cooperation, Honesty, Hope, Humility, Humor, Independence, Diligence, Peace, Intimacy, Fairness, Knowledge, Leisure, Being loved, Love, Mastery, Present, Moderation, Devotion, Rebellion, Helpfulness, Openness, Order, Passion, Joy, Popularity, Purpose, Rationality, Reality, Responsibility, Risk, Romance, Security, Acceptance, Self-control, Autonomy, Self-awareness, Devotion, Sexuality, Minimalism, Solitude, Spirituality, Stability, Tolerance, Tradition, Virtue, Wealth, Peace, Fulfillment, Truth, Dignity, Authenticity, Immersion, Effort, Conviction, Freedom, Expression, Oneness, Ingenuity, Professionalism, Flexibility, Leisure, Overcoming, Fellowship, Simplicity
"""

from typing import List, Dict
from app.openai_resolvers.openai_client import client

PROMPT_TEMPLATE = """
Extract only the keywords that represent the most important traits, values, or actions of the subject from the following text. Show only the keywords, without additional context or sentences. The output should be a list of keywords separated by commas.
"""

def create_prompts_for_multiple_sentences(analyze: List[str]) -> List[Dict[str, str]]:
    """
    Generates keyword extraction prompts for a list of sentences.

    Args:
        analyze (List[str]): A list of sentences to analyze.

    Returns:
        List[Dict[str, str]]: A list of prompts formatted for the chat API.
    """
    return [
        {
            "role": "system",
            "content": f"{PROMPT_TEMPLATE}\n\nText: {sentence}"
        }
        for sentence in analyze
    ]

def create_prompt_for_single_sentence(sentence: str) -> List[Dict[str, str]]:
    """
    Generates keyword extraction prompts for a single sentence with separate roles.

    Args:
        sentence (str): The sentence to analyze.

    Returns:
        List[Dict[str, str]]: A list of role-based prompts for the chat API.
    """
    return [
        {"role": "system", "content": adviser_prompts},
        {"role": "user", "content": sentence}
    ]

async def fetch_keywords_from_api_only_one(extract_roles: List[Dict[str, str]]):
    """
    Fetches keywords from the API for a single role-based prompt.

    Args:
        extract_roles (List[Dict[str, str]]): Role-based prompts for the API.

    Returns:
        Response object from the API.
    """
    return await client.chat.completions.create(
        messages=extract_roles,
        model="gpt-4o-mini"
    )

async def fetch_keywords_from_api(extract_roles: List[Dict[str, str]]) -> List:
    """
    Fetches keywords from the API for multiple prompts.

    Args:
        extract_roles (List[Dict[str, str]]): A list of prompts for the API.

    Returns:
        List: A list of responses from the API.
    """
    # Use list comprehension for asynchronous calls and collect responses
    return [
        await client.chat.completions.create(
            messages=[extract_role],
            model="gpt-4o-mini"
        )
        for extract_role in extract_roles
    ]

